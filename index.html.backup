<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Chicken Party 3D</title>
    <link rel="stylesheet" href="./src/style.css" />
    <!-- Three.js (UMD) -->
    <script src="https://unpkg.com/three@0.160.0/build/three.js"></script>

    <!-- Game Scripts (Order Matters) -->
    <script src="./src/GridManager.js"></script>
    <script src="./src/ResourceManager.js"></script>
    <script src="./src/SoundManager.js"></script>
    <script src="./src/SceneManager.js"></script>
    <script src="./src/UIManager.js"></script>
    <script src="./src/EventManager.js"></script>
    <script src="./src/Game.js"></script>
    <script src="./src/main.js"></script>
</head>

<body>
    <div id="app">
        <canvas id="game-canvas"></canvas>

        <!-- UI Overlay -->
        <div id="ui-layer">
            <!-- Start Screen -->
            <div id="start-screen"
                style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.85); display: flex; flex-direction: column; justify-content: center; align-items: center; z-index: 200; color: white; pointer-events: auto;">
                <h1 style="font-size: 3rem; margin-bottom: 10px;">Chicken Party 3D</h1>
                <p style="font-size: 1.2rem; color: #ccc;">Manage your startup. Survive the Chicken Party.</p>
                <button id="start-btn"
                    style="margin-top: 30px; padding: 15px 40px; font-size: 1.5rem; background: #ffcc00; border: none; border-radius: 5px; cursor: pointer; font-weight: bold; transition: transform 0.2s;">START
                    GAME</button>
            </div>

            <!-- Top Bar: Stats -->
            <div id="top-bar">
                <div class="stat-item">ü§ù <span id="hp-display">5</span></div>
                <div class="stat-item progress-container">
                    <span id="year-display">2015</span>
                    <div class="progress-bar-bg">
                        <div id="time-progress-bar" class="progress-bar-fill"></div>
                    </div>
                    <span id="day-display" style="font-size: 0.9rem; min-width: 60px;">Day 1</span>
                </div>
                <div class="stat-item">üí∞ <span id="cash-display">$10000</span></div>
                <div class="stat-item">üî¨ <span id="rd-display">0</span></div>
                <div class="stat-item">üì¢ <span id="sales-display">0</span></div>
                <div class="stat-item">‚ù§Ô∏è <span id="welfare-display">50</span></div>
                <button id="btn-toggle-production" class="icon-toggle active" title="Toggle Production Text">üí∏</button>
                <button id="btn-toggle-buffs" class="icon-toggle active" title="Toggle Buffs">‚ú®</button>
            </div>

            <!-- Notification Area -->
            <div id="notification-area"></div>

            <!-- Bottom Control Area -->
            <div id="bottom-bar">
                <!-- Purchase Preview Panel (Above build menu) -->
                <div id="purchase-preview-panel" class="hidden">
                    <div class="preview-header">
                        <div id="preview-icon">üèóÔ∏è</div>
                        <div id="preview-name">Unit Name</div>
                        <div class="cost-value" id="preview-cost">$0</div>
                    </div>
                    <div id="preview-desc">Description goes here...</div>
                    <div class="preview-section">
                        <div class="section-title">üìä Effects Per Day</div>
                        <div id="preview-stats">
                            <!-- Stats will be injected here -->
                        </div>
                    </div>
                    <div id="preview-hint">üí° Click on grid to build</div>
                </div>

                <!-- Tab Navigation -->
                <div id="tab-nav">
                    <button class="tab-btn active" data-tab="manpower">Manpower</button>
                    <button class="tab-btn" data-tab="facilities">Facilities</button>
                    <button class="tab-btn" data-tab="policies">Policies</button>
                </div>

                <!-- Tab Content Areas -->
                <div id="tab-content">
                    <!-- Manpower Tab -->
                    <div id="tab-manpower" class="tab-pane active">
                        <div class="build-menu">
                            <button class="build-btn" data-type="engineer">
                                <span class="btn-icon">üëì</span>
                                <div class="btn-label">
                                    <span class="btn-name">Jr. Dev</span>
                                    <span class="btn-price">$100</span>
                                </div>
                            </button>
                            <button class="build-btn" data-type="senior_engineer">
                                <span class="btn-icon">üë¥</span>
                                <div class="btn-label">
                                    <span class="btn-name">Sr. Dev</span>
                                    <span class="btn-price">$300</span>
                                </div>
                            </button>
                            <button class="build-btn" data-type="marketing">
                                <span class="btn-icon">üì¢</span>
                                <div class="btn-label">
                                    <span class="btn-name">Sales</span>
                                    <span class="btn-price">$150</span>
                                </div>
                            </button>
                            <button class="build-btn" data-type="pm">
                                <span class="btn-icon">üìÖ</span>
                                <div class="btn-label">
                                    <span class="btn-name">PM</span>
                                </div>
                        </div>
                    </div>

                    <!-- Global Controls -->
                    <div id="controls">
                        <button id="delete-mode-btn">üóëÔ∏è Sell Mode</button>
                    </div>
                </div>

                <!-- Event Modal (Hidden by default) -->
                <div id="event-modal" class="hidden">
                    <div class="modal-content">
                        <h2 id="event-title">Event Title</h2>
                        <p id="event-desc">Event Description</p>
                        <button id="event-close-btn">Continue</button>
                    </div>
                </div>

                <!-- Unit Info Panel (For placed units) -->
                <div id="unit-info-panel" class="hidden">
                    <div class="unit-header">
                        <div id="unit-icon">üèóÔ∏è</div>
                        <div id="unit-name">Unit Name</div>
                    </div>
                    <div id="unit-desc">Description goes here...</div>
                    <div id="unit-stats">
                        <!-- Stats will be injected here -->
                    </div>
                </div>
            </div>
        </div>
</body>

</html>