<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Chicken Party 3D</title>
    <!-- Modular CSS -->
    <link rel="stylesheet" href="./src/css/variables.css" />
    <link rel="stylesheet" href="./src/css/base.css" />
    <link rel="stylesheet" href="./src/css/layout.css" />
    <link rel="stylesheet" href="./src/css/components.css" />
    <link rel="stylesheet" href="./src/css/ui-panels.css" />
    <link rel="stylesheet" href="./src/css/dashboard.css" />
    <link rel="stylesheet" href="./src/css/modals.css" />
    <link rel="stylesheet" href="./src/css/animations.css" />
    <!-- Three.js (UMD) -->
    <script src="https://unpkg.com/three@0.160.0/build/three.js"></script>

    <!-- Game Scripts (Order Matters) -->
    <script src="./src/GridManager.js"></script>
    <script src="./src/ResourceManager.js"></script>
    <script src="./src/SoundManager.js"></script>
    <script src="./src/SceneManager.js"></script>
    <script src="./src/UIManager.js"></script>
    <script src="./src/EventManager.js"></script>
    <script src="./src/Game.js"></script>
    <script src="./src/main.js"></script>
</head>

<body>
    <div id="app">
        <canvas id="game-canvas"></canvas>

        <!-- UI Overlay -->
        <div id="ui-layer">
            <div id="panel-backdrop" class="panel-backdrop"></div>

            <!-- Start Screen -->
            <div id="start-screen"
                style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.9); display: flex; flex-direction: column; justify-content: center; align-items: center; z-index: 200; color: white; pointer-events: auto;">

                <img src="./assets/images/cover.png" alt="Chicken Party Cover"
                    style="width: 300px; height: 300px; border-radius: 20px; box-shadow: 0 0 50px rgba(255, 204, 0, 0.3); margin-bottom: 30px; object-fit: cover; border: 4px solid #fff;">

                <h1
                    style="font-size: 4rem; margin-bottom: 10px; text-shadow: 0 4px 10px rgba(0,0,0,0.5); color: #ffcc00;">
                    Chicken Party 3D</h1>
                <p style="font-size: 1.5rem; color: #eee; margin-bottom: 40px;">Manage your startup. Survive the Chicken
                    Party.</p>

                <button id="start-btn"
                    style="padding: 15px 50px; font-size: 1.8rem; background: #ffcc00; color: #000; border: none; border-radius: 50px; cursor: pointer; font-weight: 800; transition: transform 0.2s; box-shadow: 0 10px 20px rgba(255, 204, 0, 0.4);">
                    START GAME
                </button>
            </div>

            <!-- Top Bar: Stats -->
            <div id="top-bar">
                <div class="stat-item">ü§ù <span id="hp-display">5</span></div>
                <div class="stat-item progress-container">
                    <span id="year-display">2015</span>
                    <div class="progress-bar-bg">
                        <div id="time-progress-bar" class="progress-bar-fill"></div>
                    </div>
                    <span id="day-display" style="font-size: 0.9rem; min-width: 60px;">Day 1</span>
                </div>
                <div class="stat-item">üí∞ <span id="cash-display">$10000</span></div>
                <div class="stat-item">üî¨ <span id="rd-display">0</span></div>
                <div class="stat-item">üì¢ <span id="sales-display">0</span></div>
                <div class="stat-item">‚ù§Ô∏è <span id="welfare-display">50</span></div>
                <button id="btn-toggle-production" class="icon-toggle active" title="Toggle Production Text">üí∏</button>
                <button id="btn-toggle-buffs" class="icon-toggle active" title="Toggle Buffs">‚ú®</button>
                <button id="btn-toggle-dashboard" class="icon-toggle" title="Toggle Company Dashboard">üìä</button>
            </div>

            <!-- Notification Area -->
            <div id="notification-area"></div>

            <!-- Bottom Control Area -->
            <div id="bottom-bar">
                <!-- Purchase Preview Panel (Above build menu) -->
                <div id="purchase-preview-panel" class="hidden">
                    <div class="preview-header">
                        <div id="preview-icon">üèóÔ∏è</div>
                        <div id="preview-name">Unit Name</div>
                        <div class="cost-value" id="preview-cost">$0</div>
                    </div>
                    <div id="preview-desc">Description goes here...</div>
                    <div class="preview-section">
                        <div class="section-title">üìä Effects Per Day</div>
                        <div id="preview-stats">
                            <!-- Stats will be injected here -->
                        </div>
                    </div>
                    <div id="preview-hint">üí° Click on grid to build</div>
                </div>

                <!-- Policy Info Panel (Above build menu, like Purchase Preview) -->
                <div id="policy-info-panel" class="hidden">
                    <div class="policy-header">
                        <div id="policy-icon">üìã</div>
                        <div id="policy-name">Policy Name</div>
                        <div class="policy-level-badge" id="policy-level">LV 1</div>
                    </div>
                    <div id="policy-desc">Description goes here...</div>
                    <div id="policy-stats">
                        <!-- Stats will be injected here -->
                    </div>
                    <button id="policy-upgrade-btn" class="policy-upgrade-button">
                        Upgrade ($<span id="policy-cost">5000</span>)
                    </button>
                </div>

                <!--Tab Navigation -->
                <div id="tab-nav">
                    <button class="tab-btn active" data-tab="manpower">Manpower</button>
                    <button class="tab-btn" data-tab="facilities">Facilities</button>
                    <button class="tab-btn" data-tab="policies">Policies</button>
                </div>

                <!-- Build Row combines build options and sell mode control -->
                <div id="build-row">
                    <!-- Tab Content Areas -->
                    <div id="tab-content">
                        <!-- Manpower Tab -->
                        <div id="tab-manpower" class="tab-pane active">
                            <div class="build-menu">
                                <button class="build-btn" data-type="engineer">
                                    <span class="btn-icon">üëì</span>
                                    <div class="btn-label">
                                        <span class="btn-name">Jr. Dev</span>
                                        <span class="btn-price">$100</span>
                                    </div>
                                </button>
                                <button class="build-btn" data-type="senior_engineer">
                                    <span class="btn-icon">üë¥</span>
                                    <div class="btn-label">
                                        <span class="btn-name">Sr. Dev</span>
                                        <span class="btn-price">$300</span>
                                    </div>
                                </button>
                                <button class="build-btn" data-type="marketing">
                                    <span class="btn-icon">üì¢</span>
                                    <div class="btn-label">
                                        <span class="btn-name">Sales</span>
                                        <span class="btn-price">$150</span>
                                    </div>
                                </button>
                                <button class="build-btn" data-type="pm">
                                    <span class="btn-icon">üìÖ</span>
                                    <div class="btn-label">
                                        <span class="btn-name">PM</span>
                                        <span class="btn-price">$250</span>
                                    </div>
                                </button>
                            </div>
                        </div>

                        <!-- Facilities Tab -->
                        <div id="tab-facilities" class="tab-pane">
                            <div class="build-menu">
                                <button class="build-btn" data-type="server">
                                    <span class="btn-icon">üíæ</span>
                                    <div class="btn-label">
                                        <span class="btn-name">Server</span>
                                        <span class="btn-price">$500</span>
                                    </div>
                                </button>
                                <button class="build-btn" data-type="pantry">
                                    <span class="btn-icon">‚òï</span>
                                    <div class="btn-label">
                                        <span class="btn-name">Pantry</span>
                                        <span class="btn-price">$300</span>
                                    </div>
                                </button>
                                <button class="build-btn" data-type="conference_room">
                                    <span class="btn-icon">ü§ù</span>
                                    <div class="btn-label">
                                        <span class="btn-name">Meeting</span>
                                        <span class="btn-price">$1000</span>
                                    </div>
                                </button>
                                <button class="build-btn" data-type="plant">
                                    <span class="btn-icon">ü™¥</span>
                                    <div class="btn-label">
                                        <span class="btn-name">Plant</span>
                                        <span class="btn-price">$50</span>
                                    </div>
                                </button>
                            </div>
                        </div>

                        <!-- Policies Tab -->
                        <div id="tab-policies" class="tab-pane">
                            <div id="policies-list" class="build-menu">
                                <!-- Policy Items injected by JS -->
                            </div>
                        </div>
                    </div>

                    <!-- Sell Mode Control -->
                    <button id="delete-mode-btn" class="sell-mode-btn">üóëÔ∏è Sell Mode</button>
                </div>
            </div>

            <!-- Event Modal (Hidden by default) -->
            <div id="event-modal" class="hidden">
                <div class="modal-content">
                    <h2 id="event-title">Event Title</h2>
                    <p id="event-desc">Event Description</p>
                    <button id="event-close-btn">Continue</button>
                </div>
            </div>

            <!-- Unit Info Panel (For placed units) -->
            <div id="unit-info-panel" class="hidden">
                <div class="unit-header">
                    <div id="unit-icon">üèóÔ∏è</div>
                    <div id="unit-name">Unit Name</div>
                </div>
                <div id="unit-desc">Description goes here...</div>
                <div id="unit-stats">
                    <!-- Stats will be injected here -->
                </div>
            </div>


            <!-- Company Dashboard Panel -->
            <div id="company-dashboard" class="hidden">
                <div class="dashboard-header">
                    <div class="dashboard-icon">üìä</div>
                    <div class="dashboard-title">Company Dashboard</div>
                    <button id="dashboard-close-btn" class="panel-close-btn" title="Close Dashboard">√ó</button>
                </div>

                <div class="dashboard-section">
                    <div class="section-header">üí∞ Daily Economics</div>
                    <div id="dashboard-economics" class="dashboard-content">
                        <!-- Economics data will be injected here -->
                    </div>
                </div>

                <div class="dashboard-section">
                    <div class="section-header">üìà Production Metrics</div>
                    <div id="dashboard-production" class="dashboard-content">
                        <!-- Production data will be injected here -->
                    </div>
                </div>

                <div class="dashboard-section">
                    <div class="section-header">üéØ Active Policies</div>
                    <div id="dashboard-policies" class="dashboard-content">
                        <!-- Policy effects will be injected here -->
                    </div>
                </div>

                <div class="dashboard-section">
                    <div class="section-header">üòä Happiness Impact</div>
                    <div id="dashboard-happiness" class="dashboard-content">
                        <!-- Happiness data will be injected here -->
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>

</html>